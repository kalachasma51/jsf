<!DOCTYPE html>
<html>
<head>
    <title>jsf</title>
</head>
     <style>
          body {
            background-color: black;
        }
        pre {
            color: white;
        }
    </style>
<body>
    <pre>



Experiment No. 1a
_________________
	    
Implement a Java Servlet (SimpleServlet) that handles both HTTP GET and POST requests.
The servlet should:
 For GET requests, respond with a simple HTML page that includes a form to submit
a name parameter.
 For POST requests, retrieve username and password parameters from the request and
respond with an HTML page displaying these parameters.
Include necessary servlet methods to read data from the client and send appropriate
responses.


	    
SimpleServlet.java
-------------------
import java.io.*;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;


	    @WebServlet("/labserv")
public class labserv extends HttpServlet {
    private static final long serialVersionUID = 1L;
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("<html><body>");
        out.println("<h2>Submit Your Details</h2>");
        out.println("<form method='POST' action='labserv'>");
        out.println("Name: <input type='text' name='name'><br><br>");
        out.println("Password: <input type='password' name='password'><br><br>");
        out.println("<input type='submit' value='Submit'>");
        out.println("</form>");
        out.println("</body></html>");
    }
}


protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String name = request.getParameter("name");
    String password = request.getParameter("password");
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();
    out.println("<html><body>");
    out.println("<h2>Submitted Data</h2>");
    out.println("Name: " + name + "<br>");
    out.println("Password: " + password + "<br>");
    out.println("</body></html>");
}





------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	    

Experiment No. 1b
____________________
	    
Implement a Java Servlet (SessionServlet) to demonstrate session tracking using
cookies and session objects. The servlet should:
 Display a login form when accessed initially.
 Handle login functionality via a POST request, validating username and password.
 Upon successful login, store username in a session attribute and display a welcome
message with logout option.
 Implement logout functionality to invalidate the session upon user request.
Display session information including session ID, creation time, and last accessed time on the
response page.



import java.io.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;

@WebServlet("/Lab2serv")
public class Lab2serv extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        // Check if the logout action is requested
        String action = request.getParameter("action");
        if ("logout".equals(action)) {
            HttpSession session = request.getSession(false);
            if (session != null) {
                session.invalidate(); // Invalidate the session
            }
            response.sendRedirect("Lab2serv"); // Redirect to the login page
            return;
        }

        // Check if session exists
        HttpSession session = request.getSession(false);
        if (session != null && session.getAttribute("username") != null) {
            // User is logged in, display welcome message and session info
            out.println("<html><head><title>Welcome</title></head><body>");
            out.println("<h2>Welcome, " + session.getAttribute("username") + "!</h2>");
            out.println("<p><a href='Lab2serv?action=logout'>Logout</a></p>");
            out.println("<h3>Session Information:</h3>");
            out.println("<p>Session ID: " + session.getId() + "</p>");
            out.println("<p>Creation Time: " + new Date(session.getCreationTime()) + "</p>");
            out.println("<p>Last Accessed Time: " + new Date(session.getLastAccessedTime()) + "</p>");
            out.println("</body></html>");
        } else {
            // User is not logged in, display login form
            out.println("<html><head><title>Login</title></head><body>");
            out.println("<h2>Login</h2>");
            out.println("<form method='post' action='Lab2serv'>");
            out.println("Username: <input type='text' name='username'><br><br>");
            out.println("Password: <input type='password' name='password'><br><br>");
            out.println("<input type='submit' value='Login'>");
            out.println("</form>");
            out.println("</body></html>");
        }
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // Process login form submission
        String username = request.getParameter("username");
        String password = request.getParameter("password");

        // For demonstration purposes, validate against hardcoded credentials
        if (username != null && username.equals("admin") && password != null && password.equals("password")) {
            // Login successful, create session and store username
            HttpSession session = request.getSession(true); // create new session if not exists
            session.setAttribute("username", username);

            // Redirect to doGet to display welcome message and session info
            response.sendRedirect("Lab2serv");
        } else {
            // Login failed, redirect back to login page
            response.sendRedirect("Lab2serv");
        }
    }
}

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Experiment No. 2a
________________
	    
Design a JSP application for managing employee information.
 Create a JSP page (employeeForm.jsp) with an HTML form to collect employee
data (e.g., Employee ID, Name, Age, Department, and Email) using the POST
method.
 Create a JSP page (employeeResult.jsp) to retrieve the submitted form data using
request.getParameter().
 Use JSP expressions and scriptlets to process the retrieved data. For example:
o Concatenate the employee's name and department into a single string.
o Calculate the birth year from the age.
o Format the email address.
Display the processed data in a formatted manner in employeeResult.jsp.
	    
EmpForm.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Employee Details</title>
</head>
<body>
    <form method="POST" action="EmpResult.jsp">
        <h1>Enter the following Employee details</h1>
        Employee Id: <input type="text" name="eid"><br><br>
        Employee Name: <input type="text" name="ename"><br><br>
        Employee Age: <input type="text" name="eage"><br><br>
        Employee Dept: <input type="text" name="edept"><br><br>
        Employee Email: <input type="text" name="email"><br><br>
        <input type="submit" value="Submit">
    </form>
</body>
</html>

EmpResult.jsp



<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ page import="java.util.Calendar" %>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Employee Information</title>
</head>
<body>
    <h2>Employee Information Result</h2>

    <%
    // Retrieve form data
    String employeeId = request.getParameter("eid");
    String name = request.getParameter("ename");
    String ageStr = request.getParameter("eage");
    String department = request.getParameter("edept");
    String email = request.getParameter("email");

    // Process data
    int age = Integer.parseInt(ageStr);
    Calendar calendar = Calendar.getInstance();
    int currentYear = calendar.get(Calendar.YEAR);
    int birthYear = currentYear - age;

    String nameAndDepartment = name + " (" + department + ")";
    String formattedEmail = email.toLowerCase();
    %>

    <table border="1">
        <tr>
            <th>Employee ID</th>
            <td><%= employeeId %></td>
        </tr>
        <tr>
            <th>Name and Department</th>
            <td><%= nameAndDepartment %></td>
        </tr>
        <tr>
            <th>Birth Year</th>
            <td><%= birthYear %></td>
        </tr>
        <tr>
            <th>Formatted Email</th>
            <td><%= formattedEmail %></td>
        </tr>
    </table>
</body>
</html>


------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Experiment No. 2b
______________________
	
Enhance the employeeForm.jsp page to implement robust server-side validation using JSP for
managing employee information.
 Ensure that all required fields (such as Employee ID, Name, Age, Department, and
Email) are properly validated in employeeResult.jsp upon form submission.
 Implement server-side checks to verify that:
o Employee ID is a non-empty string.
o Name contains only letters and spaces.
o Age is a valid numeric value between 18 and 65.
o Department is selected from a predefined list of options.
o Email follows a valid format (e.g., name@example.com).
Display clear and descriptive error messages directly on employeeResult.jsp next to each
field if validation criteria are not met, guiding users to correct their input.
	
EmpForm.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Employee Form</title>
</head>
<body>
    <h2>Employee Information Form</h2>
    <form action="EmpResult.jsp" method="POST">
        Employee ID: <input type="text" name="empid" required><br><br>
        Employee Name: <input type="text" name="ename" required><br><br>
        Employee Age: <input type="number" name="eage" required><br><br>
        Employee Department:
        <select name="edept" required>
            <option value="">Select</option>
            <option value="HR">HR</option>
            <option value="Finance">Finance</option>
            <option value="IT">IT</option>
            <option value="Sales">Sales</option>
        </select><br><br>
        Employee Email: <input type="email" name="email" required><br><br>
        <input type="submit" value="Submit">
    </form>
</body>
</html>


EmpResult.jsp



<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ page import="java.util.regex.*" %>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Employee Information Result</title>
</head>
<body>
    <h2>Employee Information Result</h2>
    <%
        // Retrieve form data
        String employeeId = request.getParameter("empid");
        String name = request.getParameter("ename");
        String ageStr = request.getParameter("eage");
        String department = request.getParameter("edept");
        String email = request.getParameter("email");

        // Initialize error messages
        String employeeIdError = "";
        String nameError = "";
        String ageError = "";
        String departmentError = "";
        String emailError = "";

        // Validation flags
        boolean isValid = true;

        // Validate Employee ID
        if (employeeId == null || employeeId.trim().isEmpty()) {
            employeeIdError = "Employee ID is required.";
            isValid = false;
        }

        // Validate Name
        if (name == null || !name.matches("^[a-zA-Z\\s]+$")) {
            nameError = "Name must contain only letters and spaces.";
            isValid = false;
        }

        // Validate Age
        int age = 0;
        try {
            age = Integer.parseInt(ageStr);
            if (age < 18 || age > 65) {
                ageError = "Age must be between 18 and 65.";
                isValid = false;
            }
        } catch (NumberFormatException e) {
            ageError = "Age must be a valid numeric value.";
            isValid = false;
        }

        // Validate Department
        if (department == null || department.trim().isEmpty()) {
            departmentError = "Department is required.";
            isValid = false;
        } else if (!department.matches("HR|Finance|IT|Sales")) {
            departmentError = "Invalid department selected.";
            isValid = false;
        }

        // Validate Email
        if (email == null || !email.matches("^[\\w.-]+@[\\w.-]+\\.[a-zA-Z]{2,}$")) {
            emailError = "Email must be in a valid format (e.g., name@example.com).";
            isValid = false;
        }

        if (isValid) {
            // Process data
            int currentYear = java.util.Calendar.getInstance().get(java.util.Calendar.YEAR);
            int birthYear = currentYear - age;
            String nameAndDepartment = name + " (" + department + ")";
            String formattedEmail = email.toLowerCase();
    %>
            <table border="1">
                <tr>
                    <th>Employee ID</th>
                    <td><%= employeeId %></td>
                </tr>
                <tr>
                    <th>Name and Department</th>
                    <td><%= nameAndDepartment %></td>
                </tr>
                <tr>
                    <th>Birth Year</th>
                    <td><%= birthYear %></td>
                </tr>
                <tr>
                    <th>Formatted Email</th>
                    <td><%= formattedEmail %></td>
                </tr>
            </table>
    <%
        } else {
    %>
        <h3>Validation Errors</h3>
        <ul>
            <% if (!employeeIdError.isEmpty()) { %>
                <li><b>Employee ID:</b> <%= employeeIdError %></li>
            <% } %>
            <% if (!nameError.isEmpty()) { %>
                <li><b>Name:</b> <%= nameError %></li>
            <% } %>
            <% if (!ageError.isEmpty()) { %>
                <li><b>Age:</b> <%= ageError %></li>
            <% } %>
            <% if (!departmentError.isEmpty()) { %>
                <li><b>Department:</b> <%= departmentError %></li>
            <% } %>
            <% if (!emailError.isEmpty()) { %>
                <li><b>Email:</b> <%= emailError %></li>
            <% } %>
        </ul>
        <a href="EmpForm.jsp">Go back to the form</a>
    <%
        }
    %>
</body>
</html>





	-------------------------------------------------------------

Experiment No. 3
Develop a JSP application that integrates JDBC to perform CRUD (Create, Read, Update,
and Delete) operations on a `students` database table. The application should:
 Create: Insert new student records with fields such as roll-no, name, email, and age.
 Read: Retrieve and display all student records from the database.
 Update: Modify existing student records.
 Delete: Remove student records from the database.
	
DBConnection.java
--------------------
	
package com.studentcrud;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
public class DBConnection {
private static String jdbcURL =
"jdbc:mysql://localhost:3306/studentDB";
private static String jdbcUsername = "root";
private static String jdbcPassword = "password";
public static Connection getConnection() {
Connection connection = null;
try {
Class.forName("com.mysql.jdbc.Driver");
connection = DriverManager.getConnection(jdbcURL,
jdbcUsername, jdbcPassword);
} catch (ClassNotFoundException | SQLException e) {
e.printStackTrace();
}
return connection;
}
}
Student.java
package com.studentcrud;
public class Student {
private int rollNo;
private String name;
private String email;
private int age;
// Getters
public int getRollNo() {
return rollNo;
}
public String getName() {
return name;
}
public String getEmail() {
return email;
}
public int getAge() {
return age;
}
// Setters
public void setRollNo(int rollNo) {
this.rollNo = rollNo;
}
public void setName(String name) {
this.name = name;
}
public void setEmail(String email) {
this.email = email;
}
public void setAge(int age) {
this.age = age;
}
// toString method
@Override
public String toString() {
return "Student{" +
"rollNo=" + rollNo +
", name='" + name + '\'' +
", email='" + email + '\'' +
", age=" + age +
'}';
}
}


	
StudentDAO.java
----------------


	
package com.studentcrud;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;
public class StudentDAO {
public void addStudent(Student student) {
String sql = "INSERT INTO students (roll_no, name,
email, age) VALUES (?, ?, ?, ?)";
try (Connection connection =
DBConnection.getConnection();
PreparedStatement preparedStatement =
connection.prepareStatement(sql)) {
preparedStatement.setInt(1, student.getRollNo());
preparedStatement.setString(2, student.getName());
preparedStatement.setString(3,
student.getEmail());
preparedStatement.setInt(4, student.getAge());
preparedStatement.executeUpdate();
} catch (SQLException e) {
e.printStackTrace();
}
}
public List<Student> getAllStudents() {
List<Student> students = new ArrayList<>();
String sql = "SELECT * FROM students";
try (Connection connection =
DBConnection.getConnection();
Statement statement =
connection.createStatement();
ResultSet resultSet =
statement.executeQuery(sql)) {
while (resultSet.next()) {
Student student = new Student();
student.setRollNo(resultSet.getInt("roll_no"));
student.setName(resultSet.getString("name"));
student.setEmail(resultSet.getString("email"));
student.setAge(resultSet.getInt("age"));
students.add(student);
}
} catch (SQLException e) {
e.printStackTrace();
}
return students;
}
public void updateStudent(Student student) {
String sql = "UPDATE students SET name = ?, email = ?,
age = ? WHERE roll_no = ?";
try (Connection connection =
DBConnection.getConnection();
PreparedStatement preparedStatement =
connection.prepareStatement(sql)) {
preparedStatement.setString(1, student.getName());
preparedStatement.setString(2,
student.getEmail());
preparedStatement.setInt(3, student.getAge());
preparedStatement.setInt(4, student.getRollNo());
preparedStatement.executeUpdate();
} catch (SQLException e) {
e.printStackTrace();
}
}
public void deleteStudent(int rollNo) {
String sql = "DELETE FROM students WHERE roll_no = ?";
try (Connection connection =
DBConnection.getConnection();
PreparedStatement preparedStatement =
connection.prepareStatement(sql)) {
preparedStatement.setInt(1, rollNo);
preparedStatement.executeUpdate();
} catch (SQLException e) {
e.printStackTrace();
}
}
}
addStudent.jsp
<%@ page import="com.studentcrud.Student,
com.studentcrud.StudentDAO" %>
<%
if(request.getParameter("rollNo") != null) {
int rollNo =
Integer.parseInt(request.getParameter("rollNo"));
String name = request.getParameter("name");
String email = request.getParameter("email");
int age =
Integer.parseInt(request.getParameter("age"));
Student student = new Student();
student.setRollNo(rollNo);
student.setName(name);
student.setEmail(email);
student.setAge(age);
StudentDAO dao = new StudentDAO();
dao.addStudent(student);
out.println("Student added successfully.");
}
	24
%>
<html>
<body>
<h2>Add Student</h2>
<form action="addStudent.jsp" method="post">
Roll No: <input type="text" name="rollNo"><br>
Name: <input type="text" name="name"><br>
Email: <input type="text" name="email"><br>
Age: <input type="text" name="age"><br>
<input type="submit" value="Add Student">
</form>
<a href="viewStudents.jsp">View Students</a>
</body>
</html>
viewStudents.jsp
<%@ page import="java.util.List, com.studentcrud.Student,
com.studentcrud.StudentDAO" %>
<%
StudentDAO dao = new StudentDAO();
List<Student> students = dao.getAllStudents();
%>
<html>
<body>
<h2>View Students</h2>
<table border="1">
<tr>
<th>Roll No</th>
<th>Name</th>
<th>Email</th>
<th>Age</th>
<th>Actions</th>
</tr>
<%
for(Student student : students) {
%>
<tr>
<td><%= student.getRollNo() %></td>
<td><%= student.getName() %></td>
<td><%= student.getEmail() %></td>
<td><%= student.getAge() %></td>
<td>
<a href="updateStudent.jsp?rollNo=<%=
student.getRollNo() %>">Edit</a> |
<a href="deleteStudent.jsp?rollNo=<%=
student.getRollNo() %>">Delete</a>
</td>
</tr>
<%
}

%>
</table>
<a href="addStudent.jsp">Add Student</a>
</body>
</html>
updateStudent.jsp
<%@ page import="com.studentcrud.Student,
com.studentcrud.StudentDAO" %>
<%
StudentDAO dao = new StudentDAO();
int rollNo =
Integer.parseInt(request.getParameter("rollNo"));
Student student = new Student();
for(Student s : dao.getAllStudents()) {
if(s.getRollNo() == rollNo) {
student = s;
break;
}
}
if(request.getParameter("name") != null) {
String name = request.getParameter("name");
String email = request.getParameter("email");
int age =
Integer.parseInt(request.getParameter("age"));
student.setName(name);
student.setEmail(email);
student.setAge(age);
dao.updateStudent(student);
out.println("Student updated successfully.");
}
%>
<html>
<body>
<h2>Update Student</h2>
<form action="updateStudent.jsp?rollNo=<%=
student.getRollNo() %>" method="post">
Name: <input type="text" name="name" value="<%=
student.getName() %>"><br>
Email: <input type="text" name="email" value="<%=
student.getEmail() %>"><br>
Age: <input type="text" name="age" value="<%=
student.getAge() %>"><br>
<input type="submit" value="Update Student">
</form>
	
<a href="viewStudents.jsp">View Students</a>
</body>
</html>
deleteStudent.jsp
<%@ page import="com.studentcrud.StudentDAO" %>
<%
int rollNo =
Integer.parseInt(request.getParameter("rollNo"));
StudentDAO dao = new StudentDAO();
dao.deleteStudent(rollNo);
out.println("Student deleted successfully.");
%>
<html>
<body>
<a href="viewStudents.jsp">View Students</
	
</pre>
</body>
</html>
